(window.webpackJsonppuhelinluettelo=window.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,t,n){e.exports=n(38)},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(13),r=n(2),c=n(0),o=n.n(c),u=n(14),l=n.n(u),i=n(3),m=n.n(i),s="/api/persons",f=function(){return m.a.get(s).then(function(e){return e.data})},d=function(e){return m.a.post(s,e).then(function(e){return e.data})},p=function(e,t){return m.a.put("".concat(s,"/").concat(e),t).then(function(e){return e.data})},h=function(e){return m.a.delete("".concat(s,"/").concat(e)).then(function(e){return e.data})};n(37);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var v=function(e){var t=e.persons,n=e.searchName,a=e.handleDeleteButtonClick;return n?o.a.createElement("div",null,t.filter(function(e){return e.name.toString().toLowerCase().includes(n)}).map(function(e){return o.a.createElement(y,{key:e.name,person:e,handleDeleteButtonClick:a})})):o.a.createElement("div",null,t.map(function(e){return o.a.createElement(y,{key:e.name,person:e,handleDeleteButtonClick:a})}))},y=function(e){var t=e.person,n=e.handleDeleteButtonClick;return o.a.createElement("div",null,o.a.createElement("li",{style:{listStyleType:"none"},key:t.name}," ",t.name," ",t.number,o.a.createElement("button",{onClick:function(){n(t)}},"delete")))},E=function(e){var t=e.newName,n=e.newNumber,a=e.handleNewName,r=e.handleNewNumber,c=e.handleAddButtonClick;return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:c},o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:t,onChange:a})),o.a.createElement("div",null,"number: ",o.a.createElement("input",{value:n,onChange:r})),o.a.createElement("button",{type:"submit"},"add")))},g=function(e){return o.a.createElement("div",null,"filter shown with ",o.a.createElement("input",{value:e.searchName,onChange:e.handleSearchName}))},w=function(e){var t=e.message;return""===t.content?null:"error"===t.type?o.a.createElement("div",{className:"error"},t.content):o.a.createElement("div",{className:"msg"},t.content)};l.a.render(o.a.createElement(function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],u=t[1],l=Object(c.useState)(""),i=Object(r.a)(l,2),m=i[0],s=i[1],y=Object(c.useState)(""),O=Object(r.a)(y,2),N=O[0],j=O[1],k=Object(c.useState)(""),C=Object(r.a)(k,2),S=C[0],D=C[1],P=Object(c.useState)({content:"",type:""}),B=Object(r.a)(P,2),T=B[0],A=B[1];Object(c.useEffect)(function(){f().then(function(e){return u(e)})},[]),console.log("render",n.length,"persons");var I=function(e){e.preventDefault();var t={name:m,number:N,id:m};if(n.map(function(e){return e.name}).includes(m))if(window.confirm("".concat(m," is already added to phonebook, replace the old number with a new one?"))){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(n,!0).forEach(function(t){Object(a.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n.find(function(e){return e.name===m}),{number:N});p(t.id,r).then(function(e){u(n.map(function(e){return e.id!==m?e:r}));var t={content:"The number of ".concat(m," is updated"),type:"msg"};A(t),setTimeout(function(){A({content:"",type:""})},5e3)}).catch(function(e){var t={content:"Information of ".concat(m," has already been removed from server."),type:"error"};A(t),setTimeout(function(){A({content:"",type:""})},5e3)}),s(""),j("")}else s(""),j("");else d(t).then(function(e){u(n.concat(e));var t={content:"".concat(m," is added"),type:"msg"};A(t),setTimeout(function(){A({content:"",type:""})},5e3),s(""),j("")})};return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(w,{message:T}),o.a.createElement(g,{searchName:S,handleSearchName:function(e){return function(e){console.log(e.target.value),D(e.target.value)}(e)}}),o.a.createElement("h2",null,"add a new"),o.a.createElement(E,{handleAddButtonClick:function(e){return I(e)},newName:m,newNumber:N,searchName:S,handleNewName:function(e){return function(e){console.log(e.target.value),s(e.target.value)}(e)},handleNewNumber:function(e){return function(e){console.log(e.target.value),j(e.target.value)}(e)}}),o.a.createElement("h2",null,"Numbers"),o.a.createElement(v,{persons:n,searchName:S,handleDeleteButtonClick:function(e){return t=e,void(window.confirm("Delete '".concat(t.name,"'?"))&&h(t.id).then(function(e){u(n.filter(function(e){return e.id!==t.id}));var a={content:"The number of ".concat(t.name," is removed"),type:"msg"};A(a),setTimeout(function(){A({content:"",type:""})},5e3)}));var t}}))},null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.4df92c27.chunk.js.map